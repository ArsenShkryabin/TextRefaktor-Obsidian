# Архитектура проекта Text Enhancer

## Структура проекта

```
text-enhancer/
├── src/                    # Исходный код
│   ├── api/
│   │   └── AIService.ts    # Сервис для работы с AI API
│   ├── settings/
│   │   └── SettingsTab.ts  # Вкладка настроек
│   ├── ui/
│   │   └── EnhancementModal.ts  # Модальное окно предпросмотра
│   └── types.ts            # Типы и интерфейсы
├── main.ts                 # Главный файл плагина
├── manifest.json           # Метаданные плагина
├── package.json            # Зависимости npm
├── tsconfig.json           # Конфигурация TypeScript
├── esbuild.config.mjs      # Конфигурация сборки
└── styles.css             # Стили плагина
```

## Основные компоненты

### 1. Main Plugin (`main.ts`)
- Инициализация плагина
- Регистрация команд и горячих клавиш
- Управление настройками
- Обработка улучшения текста

### 2. AI Service (`src/api/AIService.ts`)
- Коммуникация с AI API
- Построение промптов
- Обработка ответов
- Тестовый режим

### 3. Settings Tab (`src/settings/SettingsTab.ts`)
- Интерфейс настроек
- Управление API ключами
- Настройка горячих клавиш
- Пресеты и промпты

### 4. Enhancement Modal (`src/ui/EnhancementModal.ts`)
- Предпросмотр улучшенного текста
- Режим сравнения
- Редактирование результата
- История изменений

## Поток данных

1. Пользователь выделяет текст и вызывает команду
2. `main.ts` получает текст из редактора
3. `AIService.ts` отправляет запрос к API
4. Ответ обрабатывается и передается в `EnhancementModal`
5. Пользователь просматривает и редактирует результат
6. При подтверждении текст заменяется в редакторе

## Расширяемость

Плагин легко расширяется:
- Добавление новых провайдеров API в `AIService.ts`
- Новые режимы улучшения в `types.ts`
- Дополнительные настройки в `SettingsTab.ts`
- Новые UI компоненты в `src/ui/`

