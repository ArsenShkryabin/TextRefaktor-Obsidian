# Тестирование плагина Text Enhancer

## Чек-лист для тестирования

### 1. Установка и базовая проверка

- [ ] Плагин установлен в `.obsidian\plugins\text-enhancer\`
- [ ] Файлы присутствуют: `main.js`, `manifest.json`, `styles.css`
- [ ] Плагин включен в настройках Obsidian
- [ ] В левом sidebar появилась иконка ⚡ (sparkles) для быстрого доступа

### 2. Настройки плагина

Откройте: **Настройки → Text Enhancer**

#### 2.1. Базовые настройки
- [ ] Поле "API ключ" отображается
- [ ] Поле "Провайдер API" отображается с выпадающим списком
- [ ] Поле "Модель" отображается (по умолчанию: gpt-4o-mini)
- [ ] Слайдер "Temperature" отображается
- [ ] Поле "Максимум токенов" отображается

#### 2.2. Кнопка "Тест API"
- [ ] Кнопка "Тестировать" отображается после поля "Максимум токенов"
- [ ] При нажатии кнопка меняется на "Тестирование..."
- [ ] При успешном тесте появляется уведомление: "✅ API ключ работает!"
- [ ] При ошибке появляется уведомление с описанием ошибки

#### 2.3. Настройка горячих клавиш
- [ ] Раздел "Горячие клавиши" отображается
- [ ] Поле для "Улучшить текст (исправить и структурировать)" отображается
- [ ] Поле для "Улучшить и дополнить текст" отображается
- [ ] Кнопки "Очистить" и "Тест" присутствуют для каждой горячей клавиши

**Тест настройки горячей клавиши:**
1. Кликните на поле ввода горячей клавиши
2. Нажмите сочетание клавиш (например: `Ctrl+Shift+Я` или `Ctrl+Shift+Ч`)
3. Проверьте, что сочетание отобразилось в поле
4. Нажмите кнопку "Тест" - должно появиться уведомление с сочетанием
5. Нажмите кнопку "Очистить" - поле должно очиститься

### 3. Иконка быстрого доступа (Ribbon)

- [ ] Иконка ⚡ отображается в левом sidebar
- [ ] При клике на иконку появляется меню:
  - [ ] Пункт "Исправить и структурировать"
  - [ ] Пункт "Улучшить и дополнить"

### 4. Команды через палитру команд

Откройте палитру команд: `Ctrl+P` (или `Cmd+P`)

- [ ] Команда "Улучшить текст (исправить и структурировать)" присутствует
- [ ] Команда "Улучшить и дополнить текст" присутствует

### 5. Функциональное тестирование

#### 5.1. Улучшение текста (режим IMPROVE)

1. Создайте тестовый текст с ошибками:
   ```
   это тестовый текст с ошыбками и плохой структурою нужно его улучшить
   ```

2. Выделите текст (или оставьте без выделения для автоматического выделения всего)

3. Выполните команду через:
   - Иконку ribbon → "Исправить и структурировать"
   - Палитру команд → "Улучшить текст (исправить и структурировать)"
   - Настроенную горячую клавишу

4. Проверьте:
   - [ ] Появилось уведомление "Обработка текста..."
   - [ ] Открылось модальное окно "Предпросмотр улучшенного текста"
   - [ ] В окне отображается улучшенный текст
   - [ ] Текст можно редактировать в модальном окне
   - [ ] Кнопка "Применить" работает - текст заменяется в редакторе
   - [ ] Кнопка "Отмена" работает - изменения не применяются
   - [ ] Кнопка "Отменить" (если есть) возвращает оригинальный текст

#### 5.2. Дополнение текста (режим ENHANCE)

1. Создайте короткий текст:
   ```
   Искусственный интеллект меняет мир
   ```

2. Выделите текст

3. Выполните команду через любой способ

4. Проверьте:
   - [ ] Текст дополнен релевантными мыслями и идеями
   - [ ] Модальное окно работает корректно

### 6. Тестирование горячих клавиш

1. Настройте горячую клавишу в настройках (например: `Ctrl+Shift+Я`)

2. Выделите текст (или оставьте без выделения)

3. Нажмите настроенное сочетание клавиш

4. Проверьте:
   - [ ] Команда выполнилась
   - [ ] Модальное окно открылось

### 7. Тестирование обработки ошибок

#### 7.1. Без API ключа
- [ ] При попытке улучшить текст без API ключа появляется ошибка
- [ ] Сообщение об ошибке понятное

#### 7.2. Неверный API ключ
- [ ] При неверном API ключе появляется ошибка
- [ ] Кнопка "Тест API" показывает ошибку

#### 7.3. Без выделенного текста
- [ ] При вызове команды без выделенного текста автоматически выделяется весь документ
- [ ] Если документ пуст, появляется уведомление

### 8. Проверка сохранения настроек

- [ ] Настройки сохраняются после изменения
- [ ] После перезапуска Obsidian настройки сохраняются
- [ ] Горячие клавиши работают после перезапуска

## Известные проблемы

Если что-то не работает:

1. **Новые функции не появляются:**
   - Убедитесь, что пересобрали плагин: `npm run build`
   - Скопируйте новый `main.js` в папку плагина
   - Перезапустите Obsidian
   - Отключите и включите плагин заново

2. **Иконка не появляется:**
   - Проверьте, что плагин включен
   - Перезапустите Obsidian
   - Проверьте консоль на ошибки (Ctrl+Shift+I → Console)

3. **Горячие клавиши не работают:**
   - Убедитесь, что сочетание не конфликтует с другими
   - Попробуйте другое сочетание
   - Проверьте, что поле горячей клавиши не пустое
   - Для кириллических клавиш (Я, Ч) используйте соответствующие латинские (Z, X)

## Логи для отладки

Откройте консоль разработчика: `Ctrl+Shift+I` (или `Cmd+Option+I` на Mac)

Проверьте:
- Нет ли ошибок в консоли
- Появляется ли сообщение "Text Enhancer plugin loaded"
- Есть ли ошибки при вызове команд

